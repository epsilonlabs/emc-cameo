syntax = "proto3";
option java_multiple_files = true;

package org.eclipse.epsilon.emc.magicdraw.modelapi;

message ModelElement {
    string elementID = 1;
    string metamodelUri = 2;
    string typeName = 3;
}

message StringCollection {
    repeated string values = 1;
}

message DoubleCollection {
    repeated double values = 1;
}

message IntegerCollection {
    repeated sint64 values = 1;
}

message BooleanCollection {
    repeated bool values = 1;
}

message ModelElementCollection {
    repeated ModelElement values =  1;
}

message Value {
    oneof value {
        string stringValue = 1;
        double doubleValue = 2;
        sint64 longValue = 3;
        bool booleanValue = 4;
        ModelElement referenceValue = 5;

        StringCollection stringValues = 7;
        DoubleCollection doubleValues = 8;
        IntegerCollection longValues = 9;
        BooleanCollection booleanValues = 10;
        ModelElementCollection referenceValues = 11;

        bool notDefined = 12;
    }
}

message AllOfRequest {
    // NOTE: if both of these are omitted, we ask for the entire contents of the model
    string metamodelUri = 1;
    string typeName = 2;

    // Limits the scope of the request to the proper contents of this element
    string rootElementHyperlink = 3;

    // If true and a type is specified, only exact matches of this type are fetched
    bool onlyExactType = 4;
}

message GetFeatureValueRequest {
    string elementID = 1;
    string featureName = 2;
}

message HasTypeRequest {
    string metamodelUri = 1;
    string typeName = 2;
}

message HasTypeResponse {
    bool hasType = 1;
}

service ModelService {
    rpc allOf(AllOfRequest) returns (ModelElementCollection);
    rpc getFeatureValue(GetFeatureValueRequest) returns (Value);
    rpc hasType(HasTypeRequest) returns (HasTypeResponse);
}